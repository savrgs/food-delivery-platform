<div class="auth-container">
  <div class="auth-card">
    <div class="auth-header">
      <h1>FreshEats</h1>
      <h2>Reset Password</h2>
    </div>

    @if (!emailSent) {
      <form (ngSubmit)="onSubmit()" class="auth-form">
        <p class="auth-description">Enter your email address and we'll send you a link to reset your password.</p>

        @if (error) {
          <div class="error-alert">
            {{ error }}
            <button type="button" class="btn-close-error" (click)="error = ''" title="Close">Ã—</button>
          </div>
        }

        <div class="form-group">
          <label for="email">Email Address</label>
          <input
            type="email"
            id="email"
            [(ngModel)]="email"
            name="email"
            placeholder="Enter your email"
            required
            [disabled]="loading"
          />
        </div>

        <button type="submit" class="btn-primary" [disabled]="loading">
          @if (loading) {
            <span>Sending...</span>
          } @else {
            <span>Send Reset Link</span>
          }
        </button>

        <div class="form-footer">
          <p>Remember your password? <a routerLink="/login">Sign In</a></p>
        </div>
      </form>
    } @else {
      <div class="success-state">
        <div class="success-icon-circle">
          <span class="checkmark"></span>
        </div>
        <h3>Check Your Email</h3>
        <p>We've sent a password reset link to</p>
        <p class="email-sent"><strong>{{ email }}</strong></p>
        <p class="note">If you don't see it, check your spam folder.</p>
        
        @if (resetToken) {
          <div class="demo-note">
            <p><strong>Demo Mode:</strong> Email not configured. Use this link:</p>
            <a [routerLink]="['/reset-password']" [queryParams]="{token: resetToken}" class="demo-link">
              Reset Password
            </a>
          </div>
        }

        <div class="form-footer">
          <p><a routerLink="/login">Back to Sign In</a></p>
        </div>
      </div>
    }
  </div>
</div>
